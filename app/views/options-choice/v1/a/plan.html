{% extends "layout.html" %}

{% block pageTitle %}
  Task list
{% endblock %}

{% block beforeContent %}
  <a class="govuk-back-link" href="configure?grantNum={{ grantNum }}">Back</a>
{% endblock %}


{% block content %}

<p>{{ data.plan }}</p>

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <h1 class="govuk-heading-xl">
        Your plan
      </h1>

      <h2 class="govuk-heading-s govuk-!-margin-bottom-2">Application incomplete</h2>
      <p class="govuk-body govuk-!-margin-bottom-7">You have completed {{ completedCount}} of 8 sections.</p>

      <ol class="app-task-list">
        <li>
          <h2 class="app-task-list__section">
            <span class="app-task-list__section-number">1. </span> Options
          </h2>
          <ul class="app-task-list__items">

            {% if grantList.length === 0 %}
            <tr class="govuk-table__row">
              <td scope="row" class="govuk-table__cell" colspan="2">No results found</td>
            </tr>
            {% else %}

              {% for i in range(0, data.plan.length) -%}
                {% if data.plan[i][2] === 'Option' %}
                  <li class="app-task-list__item">
                    <span class="app-task-list__task-name">
                      <a href="configure?planNum={{ i }} " aria-describedby="completion-status">
                        {{ data.import.grants[data.plan[i][1]].code }} {{ data.import.grants[data.plan[i][1]].title }}

                        {{ data.import.grants[i][1].code }} {{ data.import.grants[data.plan[i][1]].title }}
                      </a>
                    </span>
                    {% if data.plan[i][4] === true %}
                      <strong class="govuk-tag app-task-list__tag" id="completion-status">Completed</strong>
                    {% else %}
                      <strong class="govuk-tag govuk-tag--blue app-task-list__tag" id="contact-details-status">Not complete</strong>
                    {% endif %}
                  </li>
                {% endif %}
              {%- endfor %}

            {% endif %}

          </ul>
        </li>

        <li>
          <h2 class="app-task-list__section">
            <span class="app-task-list__section-number">2. </span> Capital items
          </h2>
          <ul class="app-task-list__items">

            {% for i in range(0, data.plan.length) -%}
            {% if data.plan[i][2] === 'Capital Item' %}
            <li class="app-task-list__item">
              <span class="app-task-list__task-name">
                <a href="configure?planNum={{ i }} " aria-describedby="completion-status">
                  {{ data.import.grants[data.plan[i][1]].code }} {{ data.import.grants[data.plan[i][1]].title }}

                  {{ data.import.grants[i][1].code }} {{ data.import.grants[data.plan[i][1]].title }}
                </a>
              </span>
              {% if data.plan[i][4] === true %}
                <strong class="govuk-tag app-task-list__tag" id="completion-status">Completed</strong>
              {% else %}
                <strong class="govuk-tag govuk-tag--blue app-task-list__tag" id="contact-details-status">Not complete</strong>
              {% endif %}
            </li>
            {% endif %}
            {%- endfor %}

          </ul>
        </li>

        <li>
          <h2 class="app-task-list__section">
            <span class="app-task-list__section-number">3. </span> Supplements
          </h2>
          <ul class="app-task-list__items">
            {% if grantList.length === 0 %}
            <tr class="govuk-table__row">
              <td scope="row" class="govuk-table__cell" colspan="2">No results found</td>
            </tr>
            {% else %}

            {% for i in range(0, data.plan.length) -%}
            {% if data.plan[i][2] === 'Supplement' %}
            <li class="app-task-list__item">
              <span class="app-task-list__task-name">
                <a href="configure?planNum={{ i }} " aria-describedby="completion-status">
                  {{ data.import.grants[data.plan[i][1]].code }} {{ data.import.grants[data.plan[i][1]].title }}

                  {{ data.import.grants[i][1].code }} {{ data.import.grants[data.plan[i][1]].title }}
                </a>
              </span>
              {% if data.plan[i][4] === true %}
                <strong class="govuk-tag app-task-list__tag" id="completion-status">Completed</strong>
              {% else %}
                <strong class="govuk-tag govuk-tag--blue app-task-list__tag" id="contact-details-status">Not complete</strong>
              {% endif %}
            </li>
            {% endif %}
            {%- endfor %}

            {% endif %}
          </ul>
        </li>
      </ol>
    </div>
  </div>

{% endblock %}
