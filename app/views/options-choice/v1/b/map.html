{% extends "layout.html" %}

{% block pageTitle %}
  Drop a pin on your land
{% endblock %}

{% block head %}
{% include "includes/head.html" %}

<link rel="shortcut icon" type="image/x-icon" href="docs/images/favicon.ico" />

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin=""></script>

<style>
  .map {
    height: 500px;
    width: 100%;
  }
</style>


{% endblock %}


{% block beforeContent %}
  <a class="govuk-back-link" href="location">Back</a>
{% endblock %}

{% block content %}

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">

      <h1 class="govuk-heading-xl">
        Drop a pin on your land
      </h1>

      <p>Find your land by entering a place name or postcode.</p>

      <section aria-labelledby="map" role="region">
        <div id="mapid" style="width: 600px; height: 400px;"></div>
      </section>

      <a href="land-use" role="button" draggable="false" class="govuk-button govuk-!-margin-top-4"  data-module="govuk-button">Continue</a>

    </div>
  </div>


{% endblock %}

{% block pageScripts %}

<!-- Open layers -->
<!-- Below is for visual and interaction reference only -->
<!-- Will need to be converted to production code -->

<script>

	var mymap = L.map('mapid').setView([52.308479, -2.219238], 6);

	L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
		maxZoom: 18,
		attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, ' +
			'Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
		id: 'mapbox/streets-v11',
		tileSize: 512,
		zoomOffset: -1
	}).addTo(mymap);

	var myMarker = L.marker([53.514185, -2.109375], {draggable: true})
		.addTo(mymap)
		.on('dragend', function() {
			var coord = String(myMarker.getLatLng()).split(',');
			console.log(coord);
			var lat = coord[0].split('(');
			console.log(lat);
			var lng = coord[1].split(')');
			console.log(lng);
			myMarker.bindPopup("Moved to: " + lat[1] + ", " + lng[0] + ".");
		});

</script>

<!-- / Visual and interaction reference -->
<!-- / Open layers -->
{% endblock %}
